#empty-chat-placeholder {
	display: flex;
	position: relative;
	flex-direction: column; /* For vertical stacking of image and text */
	justify-content: center; /* Center content vertically */
	align-items: center; /* Center content horizontally */
	text-align: center; /* Center text within its own line */
	padding-left: 20px;
	padding-right: 20px;
	padding-top: 20px;
	padding-bottom: 10px;
	box-sizing: border-box; /* Ensures padding is included in the element's total width and height */
	background-color: var(
		--vscode-editorWidget-background
	); /* Match chat container background */
	border-radius: var(--border-radius); /* Match chat container border radius */
	flex-grow: 1; /* Allow it to take up available space, like chat-container */
	height: 100%; /* Ensures it fills the parent container's height */
}

.empty-chat-logo {
	width: 20px; /* Example size */
	height: auto; /* Maintain aspect ratio */
	opacity: 0.5; /* Subtle appearance */
	filter: grayscale(100%); /* Make it monochrome to fit theme */
	position: absolute;
	top: 10px; /* Adjust position to align with text */
	right: 10px; /* Adjust position to align with text */
}

.empty-chat-container {
	display: flex;
	flex-direction: column; /* Stack image and text vertically */
	justify-content: start; /* start content vertically */
	align-items: start; /* start content horizontally */
	text-align: start; /* start text within its own line */
	padding-bottom: 20px;
	padding-left: 5px;
	padding-right: 5px;
	background-color: var(
		--vscode-editorWidget-background
	); /* Match chat container background */
	border-radius: var(--border-radius); /* Match chat container border radius */
	overflow-y: scroll;
	overflow-x: hidden;
}

.empty-chat-text {
	font-size: 0.9em;
	color: var(--vscode-descriptionForeground); /* A subtle text color */
	max-width: 80%; /* Prevent text from stretching too wide */
	line-height: 1.5;
}

.empty-chat-list-title {
	font-weight: 600;
	position: relative;
	margin: 0;
	padding: 0;
	color: var(--vscode-editor-foreground); /* Main text color */
	right: 10px;
}

.empty-chat-list {
	display: flex;
	flex-direction: column; /* Stack items vertically */
	gap: 1px; /* Space between items */
	width: 100%; /* Full width of the parent */
	padding: 0 10px;
	margin: 0 !important;
}

.message {
	border-radius: var(--border-radius);
	word-wrap: break-word;
	line-height: 1.5;
	width: 100%;
	max-width: 95%; /* Keep slightly off edge */
	border: 1px solid transparent; /* Base border */
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05); /* Subtle shadow */
	display: flex;
	flex-direction: column;
	position: relative;
	margin-bottom: 35px;
}

.message > strong {
	display: block; /* Ensure the sender label (e.g., "User:", "Model:") takes its own line */
	margin-bottom: 5px;
	font-weight: 600;
	font-size: 0.9em;
	opacity: 0.8;
}

.message-text-content {
	display: block;
	flex-grow: 1;
	width: 100%;
}

.message-text-content table {
	display: block;
	width: fit-content;
	overflow-x: auto;
	white-space: nowrap;
	min-width: 100%;
}

.message-text-content table td,
.message-text-content table th {
	white-space: normal;
}

.user-message {
	padding: var(--message-padding);
	background-color: var(--vscode-list-activeSelectionBackground);
	color: var(--vscode-list-activeSelectionForeground);
	align-self: flex-end;
	margin-left: auto;
	min-height: fit-content;
	border-color: var(--vscode-list-activeSelectionBackground);
}

.user-message strong {
	color: var(--vscode-list-activeSelectionForeground);
}

.ai-message {
	background-color: transparent;
	align-self: flex-start;
	margin-right: auto;
	min-height: fit-content;
	position: relative; /* Ensure .message-actions is positioned relative to this */
}

.ai-message.error-message {
	background-color: var(--vscode-inputValidation-errorBackground);
	color: var(--vscode-errorForeground);
	border-color: var(--vscode-inputValidation-errorBorder);
	border-left-width: 4px;
	padding: 10px;
	text-align: left;
	width: 100%;
}

.ai-message.error-message strong {
	color: var(--vscode-errorForeground);
}

.message-actions {
	display: flex; /* Use flexbox to arrange buttons horizontally */
	gap: 4px; /* Space between action buttons */
	opacity: 0; /* Initially hidden */
	pointer-events: auto; /* Enable pointer events by default, opacity controls visibility */
	transition: opacity 0.3s ease-in-out; /* Smooth transition for visibility */
	position: absolute;
	bottom: -30px;
	left: 0px;
	z-index: 10;
	width: 100%; /* Added as per instruction */
	overflow-x: auto; /* Added as per instruction */
	white-space: nowrap; /* Added as per instruction */
	-webkit-overflow-scrolling: touch; /* Added as per instruction */
	padding-right: 8px; /* Added as per instruction */
	box-sizing: border-box; /* Added for robustness based on plan context */
}

.ai-message:hover .message-actions,
.user-message:hover .message-actions,
.message-actions:hover {
	opacity: 1; /* Fully opaque on hover */
}

.ai-message .message-actions {
	left: 0px;
	right: auto;
}

.user-message .message-actions {
	left: 0px;
	right: auto;
}

.system-message,
.loading-message {
	color: var(--vscode-focusBorder);
	font-style: italic;
	text-align: center;
	background: none;
	padding: 5px 0;
	margin: var(--element-spacing) auto;
	align-self: center;
	width: 90%;
	box-shadow: none;
	border: none;
}

.loading-message {
	font-weight: 500;
}

.plan-step-message {
	background-color: var(
		--vscode-editorGroup-emptyBackground
	); /* A subtle background */
	color: var(--vscode-descriptionForeground); /* Soft text color */
	font-style: italic;
	text-align: start;
	align-self: start; /* start horizontally in flex container */
	max-width: 100%; /* Make it narrower */
	margin-left: auto; /* For centering with auto margins */
	margin-right: auto; /* For centering with auto margins */
	border: none;
	box-shadow: none;
	word-wrap: normal; /* Prevent aggressive word wrapping if not needed */
}
.plan-step-message .message-actions,
.plan-step-message .copy-button,
.plan-step-message .delete-button,
.plan-step-message .edit-button,
.plan-step-message .generate-plan-button {
	display: none !important; /* Use !important to ensure override */
}

.ai-context-files {
	display: flex;
	flex-direction: column;
	/* Visual appearance */
	background-color: var(--vscode-editorWidget-background);
	border: 1px solid var(--vscode-editorGroupHeader-tabsBorder); /* A subtle border */
	border-radius: var(--border-radius);
	padding: var(--message-padding); /* Similar to message padding */
	margin-top: 5px; /* Space above */
	margin-bottom: var(--element-spacing); /* Space below */
	/* Collapsible behavior */
	max-height: 500px; /* Default max height when expanded */
	overflow: hidden; /* Hide overflow initially, list itself will scroll if needed */
	transition:
		max-height 0.3s ease-out,
		padding 0.3s ease-out,
		margin 0.3s ease-out; /* Smooth collapse/expand */
}
.ai-context-files.collapsed {
	max-height: 2.5em;
	padding-bottom: 0;
	margin-bottom: 5px; /* to be tighter when collapsed */
	overflow: hidden;
}

.context-files-header {
	display: flex;
	justify-content: flex-start;
	align-items: center;
	padding-bottom: 4px;
	border-bottom: 1px solid var(--vscode-editor-paneBorder); /* A separator */
	background-color: transparent; /* Keep transparent */
	cursor: pointer; /* Indicates it's clickable to toggle */
	user-select: none;
	font-weight: 600;
}
.context-files-header::before {
	content: "→"; /* default collapsed arrow */
	margin-right: 8px;
	display: inline-block;
	transition: transform 0.2s ease-in-out;
	font-weight: bold;
	font-size: 1.1em;
	min-width: 1em;
	text-align: center;
}
.ai-context-files:not(.collapsed) .context-files-header::before {
	content: "↓";
	transform: rotate(0deg);
}
.context-files-header h4 {
	margin: 0; /* Remove default margin */
	font-size: 0.95em;
	color: var(--vscode-editor-foreground); /* Main text color */
	font-weight: 600;
}

.context-file-list {
	display: flex;
	gap: 6px; /* Space between file items */
	flex-direction: column;
	padding: 0; /* Remove default padding */
	margin: 0; /* Remove default margin */
	max-height: 150px; /* Default max height for scrollable list when expanded */
	overflow-y: auto; /* Scroll if too many files */
	transition:
		max-height 0.3s ease-out,
		padding 0.3s ease-out,
		margin 0.3s ease-out; /* Smooth collapse/expand */
}

.context-file-item {
	background-color: var(
		--vscode-button-secondaryBackground
	); /* Subtle background */
	border: 1px solid var(--vscode-button-border); /* Subtle border */
	padding: 4px 8px;
	border-radius: var(--border-radius);
	font-size: 0.85em;
	color: var(--vscode-editor-foreground); /* Text color */
	white-space: nowrap; /* Prevent file path from wrapping */
	text-overflow: ellipsis; /* Add ellipsis if path is too long */
	overflow: hidden;
	max-width: 100%; /* Ensure it doesn't exceed parent width */
	flex-shrink: 0; /* Don't shrink when wrapped */
	cursor: pointer; /* Now directly clickable */
	text-decoration: none; /* No underline */
	transition:
		background-color 0.1s ease,
		border-color 0.1s ease;
}
.context-file-item:hover {
	background-color: var(--vscode-button-secondaryHoverBackground);
	border-color: var(--vscode-focusBorder);
}
.context-file-item.selected {
	background-color: var(--vscode-list-activeSelectionBackground);
	color: var(--vscode-list-activeSelectionForeground);
	border-color: var(
		--vscode-list-activeSelectionBorder,
		var(--vscode-focusBorder)
	);
}

/* Styles for the textarea when message is in edit mode */
.message-text-content.editing-textarea {
	width: 100%;
	height: 100px; /* Minimum height for usability */
	min-height: 100px; /* Minimum height for usability */
	max-height: 300px; /* Minimum height for usability */
	resize: vertical; /* Allow vertical resizing */
	background-color: var(--vscode-input-background);
	color: var(--vscode-input-foreground);
	border: 1px solid var(--vscode-input-border);
	border-radius: var(--border-radius);
	padding: var(--message-padding);
	font-family: inherit;
	font-size: inherit;
	line-height: 1.5;
	box-sizing: border-box; /* Include padding and border in width/height */
	outline: none !important;
	overflow-y: scroll;
	overflow-x: hidden;
}

.message-text-content.editing-textarea:focus {
	border-color: var(--vscode-focusBorder);
	box-shadow: 0 0 0 1px var(--vscode-focusBorder);
}

.project-name {
	font-weight: bold;
	display: flex;
	align-items: start;
	justify-content: center;
	margin-right: 10px;
	padding: 0px 5px;
	height: var(--icon-button-size);
	border: 1px solid var(--vscode-button-border);
	border-radius: var(--border-radius);

	background-color: var(--vscode-input-background); /* Keep dark background */
	border-color: var(--border-color);
	color: var(--vscode-button-secondaryForeground);
	opacity: 0.6; /* Slightly faded */
	cursor: default; /* Indicate non-clickable */

	user-select: none;
	font-size: 0.8em; /* Adjust icon size slightly if needed */
	white-space: nowrap; /* Prevent wrapping */
	text-overflow: ellipsis; /* Add ellipsis if too long */
	overflow: hidden;

	flex-direction: column;
	gap: 2px;
}

.project-name-title {
	font-size: 0.8em;
	font-weight: 300;
}

.chat-controls {
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.editing-indicator {
	display: none;
}
.cancel-edit-button {
	display: none;
}

/* --- Plan Timeline Styles --- */
#plan-timeline-wrapper {
	display: flex;
	flex-direction: column;
	align-items: stretch;
	gap: 8px;
	position: sticky;
	top: 0;
	z-index: 100;
	padding: 10px;
	/* Thematic Container Styling */
	background-color: var(
		--vscode-editorWidget-background,
		rgba(40, 40, 40, 0.3)
	);
	backdrop-filter: blur(20px);
	-webkit-backdrop-filter: blur(20px); /* For Safari */
	border: 1px solid var(--vscode-editorGroupHeader-tabsBorder, #3a3a3a);
	border-radius: var(--border-radius, 5px);
	width: 90%;
}

.plan-step-container {
	flex: 0 0 auto;
	padding: 4px 10px;
	border-radius: 4px;
	cursor: default;
	font-size: 0.9em;
	line-height: 1.2;
	transition: all 0.2s ease;
	border: 1px solid transparent;
	width: 90%;
}

.plan-step-container:hover {
	opacity: 0.9;
}

.completed-step {
	background-color: green;
	color: white;
	overflow-y: scroll;
	text-overflow: clip;
	white-space: normal;
}

.active-step {
	background-color: var(--vscode-button-secondaryBackground);
	color: var(--vscode-button-foreground);
	overflow-y: scroll;
	text-overflow: clip;
	white-space: normal;
}

.future-step {
	display: none; /* Required */
	background-color: var(--vscode-editor-background);
	color: var(--vscode-descriptionForeground);
	overflow-y: scroll;
	text-overflow: clip;
	white-space: normal;
}

.error-step {
	background-color: var(--vscode-errorForeground);
	color: var(--vscode-editor-background);
	font-weight: bold;
	box-shadow: 0 0 8px var(--vscode-errorForeground);
	overflow-y: scroll;
	text-overflow: clip;
	white-space: normal;
}

/* --- Context Agent Terminal Styling --- */
.message.context-agent-log {
	background-color: #1e1e1e; /* Deep terminal background */
	color: #d4d4d4; /* Standard terminal text */
	font-family: "SF Mono", Monaco, Menlo, Courier, monospace;
	font-size: 0.85em;
	padding: 10px 14px;
	margin-bottom: 20px;
	border: 1px solid #333;
	border-radius: 6px;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
	opacity: 0.95;
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.message.context-agent-log > strong {
	color: #4ec9b0; /* VS Code Cyan/Teal for "Sender" */
	font-weight: 600;
	display: flex;
	align-items: center;
	gap: 6px;
	border-bottom: 1px solid #333;
	padding-bottom: 6px;
	margin-bottom: 4px;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	font-size: 0.9em;
}

.context-agent-icon {
	color: #4ec9b0;
	font-size: 1.1em;
}

.message.context-agent-log .message-text-content {
	line-height: 1.5;
	/* Removed white-space: pre-wrap to let markdown renderer handle formatting */
}

/* Compact margins for markdown elements inside context logs */
.message.context-agent-log .message-text-content p {
	margin: 0 0 4px 0;
}
.message.context-agent-log .message-text-content pre {
	margin: 4px 0;
}

/* Collapsible Context Agent Details */
.context-agent-details {
	width: 100%;
}

.context-agent-summary {
	cursor: pointer;
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 4px 0;
	color: #4ec9b0; /* VS Code Cyan/Teal */
	font-weight: 600;
	font-size: 0.9em;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	list-style: none; /* Remove default arrow */
	user-select: none;
}

.context-agent-summary::-webkit-details-marker {
	display: none; /* Remove default arrow for webkit browsers */
}

.context-agent-summary::before {
	content: "▶"; /* Collapsed indicator */
	font-size: 0.7em;
	transition: transform 0.2s ease-in-out;
}

.context-agent-details[open] .context-agent-summary::before {
	transform: rotate(90deg); /* Expanded indicator */
}

.context-agent-summary:hover {
	opacity: 0.8;
}

.context-agent-content {
	padding-top: 4px;
	margin-top: 2px;
	border-top: 1px solid rgba(255, 255, 255, 0.05); /* Subtle separator */
}

.context-agent-content:first-of-type {
	border-top: none;
	margin-top: 6px;
	padding-top: 8px;
}

/* Loading Animation for Context Agent */
@keyframes context-agent-pulse {
	0% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.5;
		transform: scale(0.9);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

.context-agent-summary.loading .context-agent-icon {
	animation: context-agent-pulse 1.5s infinite ease-in-out;
	color: #ffcc00; /* Optional: Change color to indicate activity */
}

/* --- Generated Plan Label --- */
.generated-plan-label {
	display: inline-block;
	font-size: 0.75em;
	font-weight: 600;
	color: var(--vscode-charts-yellow, #e2c08d);
	background-color: rgba(226, 192, 141, 0.12);
	padding: 2px 8px;
	border-radius: 4px;
	margin-left: 4px;
	margin-bottom: 6px;
	vertical-align: middle;
	letter-spacing: 0.3px;
	text-transform: uppercase;
	width: fit-content;
}
